@import url('https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap');
@import url('tldraw/tldraw.css');

/* Variables */
:root {
	/* Border radii */
	--tla-radius-1: 2px;
	--tla-radius-2: 4px;
	/* Fonts */
	--tla-font-ui:
		'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,
		Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	color: var(--text-color-0);
	line-height: 1.6;
	touch-action: none;
	font-family: var(--tla-font-ui);
	font-weight: 500;
}

.tla {
	position: absolute;
	top: 0px;
	left: 0px;
	width: 100%;
	height: 100%;
	font-family: var(--tla-font-ui);
	background-color: var(--tla-color-panel);
	color: var(--tla-color-text-1);
}

.tla-theme__light {
	--tla-color-sidebar: hsl(0, 0%, 99%);
	--tla-color-tooltip: hsla(200, 14%, 4%, 0.838);
	--tla-color-canvas: hsl(210, 20%, 98%);
	--tla-color-panel: hsl(0, 0%, 100%);
	--tla-color-text-1: hsl(204, 8%, 5%);
	--tla-color-text-2: hsl(204, 2%, 20%);
	--tla-color-text-3: hsl(204, 4%, 45%);
	--tla-color-contrast: hsl(0, 0%, 100%);
	--tla-color-low: hsl(204, 16%, 94%);
	--tla-color-border: hsl(204, 16%, 85%);
	--tla-color-hover-1: hsl(204, 16%, 4%, 3%);
	--tla-color-hover-2: hsl(204, 16%, 4%, 4.5%);
	--tla-color-hover-3: hsla(0, 0%, 100%, 32.5%);
	--tla-color-overlay: hsla(240, 16%, 2%, 30%);
	--tla-color-primary: hsl(214, 84%, 56%);
	--tla-color-cta: hsl(214, 92%, 50%);
	--tla-color-secondary: hsl(0, 0%, 92%);
	--tla-color-secondary-border: hsl(0, 0%, 80%);
	--tla-color-accent-1: hsl(50, 91%, 70%);
	--tla-color-accent-2: hsl(28, 88%, 57%);
	--tla-color-accent-3: hsl(135, 59%, 49%);
	--tla-color-warning: hsl(0, 88%, 57%);
	/* Shadows */
	/* --tla-shadow-primary-highlight: inset 0px 4px 2px -4px hsl(214, 94%, 94%),
		inset 4px 4px 4px -6px hsl(214, 94%, 100%); */
	--tla-shadow-1: 0px 1px 2px hsl(0, 0%, 0%, 25%), 0px 1px 3px hsl(0, 0%, 0%, 9%);
	--tla-shadow-2:
		0px 0px 2px hsl(0, 0%, 0%, 16%), 0px 2px 3px hsl(0, 0%, 0%, 24%),
		0px 2px 6px hsl(0, 0%, 0%, 0.1), inset 0px 0px 0px 1px var(--tla-color-contrast);
	--tla-shadow-3:
		0px 1px 2px hsl(0, 0%, 0%, 28%), 0px 2px 6px hsl(0, 0%, 0%, 14%),
		inset 0px 0px 0px 1px var(--tla-color-contrast);
	--tla-shadow-4:
		0px 0px 3px hsl(0, 0%, 0%, 19%), 0px 5px 4px hsl(0, 0%, 0%, 16%),
		0px 2px 16px hsl(0, 0%, 0%, 6%), inset 0px 0px 0px 1px var(--tla-color-contrast);
}

.tla-theme__dark {
	--tla-color-sidebar: hsl(0, 0%, 5%);
	--tla-color-tooltip: hsla(0, 0%, 100%, 1);
	--tla-color-canvas: hsl(240, 5%, 6.5%);
	--tla-color-panel: hsl(240, 6%, 13%);
	--tla-color-text-1: hsl(204, 8%, 98%);
	--tla-color-text-2: hsl(204, 5%, 85%);
	--tla-color-text-3: hsl(204, 4%, 75%);
	--tla-color-contrast: hsl(0, 0%, 100%);
	--tla-color-low: hsl(240, 4%, 11%);
	--tla-color-border: hsl(240, 12%, 20%);
	--tla-color-hover-1: hsl(240, 8%, 100%, 3%);
	--tla-color-hover-2: hsl(240, 8%, 100%, 5%);
	--tla-color-hover-3: hsl(204, 16%, 4%, 3%);
	--tla-color-overlay: hsla(240, 0%, 0%, 81%);
	--tla-color-cta: hsl(214, 100%, 50%);
	--tla-color-primary: hsl(214, 84%, 46%);
	--tla-color-secondary: hsl(0, 0%, 20%);
	--tla-color-secondary-border: hsl(0, 0%, 25%);
	--tla-color-accent-1: hsl(50, 91%, 60%);
	--tla-color-accent-2: hsl(28, 88%, 47%);
	--tla-color-accent-3: hsl(135, 59%, 39%);
	--tla-color-warning: hsl(0, 95%, 65%);
	/* Shadows */
	/* --tla-shadow-primary-highlight: inset 0px 1px 1px -1px hsl(214, 94%, 72%),
		inset 4px 4px 4px -6px hsl(214, 94%, 80%); */
	--tla-shadow-1:
		0px 1px 2px hsl(0, 0%, 0%, 16.1%), 0px 1px 3px hsl(0, 0%, 0%, 22%),
		inset 0px 0px 0px 1px var(--tla-color-panel);
	--tla-shadow-2:
		0px 1px 3px hsla(0, 44%, 27%, 0.666), 0px 2px 6px hsl(0, 0%, 0%, 33%),
		inset 0px 0px 0px 1px var(--tla-color-panel);
	--tla-shadow-3:
		0px 1px 3px hsl(0, 0%, 0%, 50%), 0px 2px 12px hsl(0, 0%, 0%, 50%),
		inset 0px 0px 0px 1px var(--tla-color-panel);
}

.tla .tl-container {
	font-family: var(--tla-font-ui);
	font-size: 12px;
	font-weight: 500;
}

body {
	font-size: 12px;
	overscroll-behavior: none;
}

/*
  1. Use a more-intuitive box-sizing model.
*/
*,
*::before,
*::after {
	box-sizing: border-box;
}
/*
  2. Remove default margin
*/
* {
	margin: 0;
}
/*
  5. Improve media defaults
*/
img,
picture,
video,
canvas,
svg {
	display: block;
	max-width: 100%;
}
/*
  6. Remove built-in form typography styles
*/
svg,
input,
button,
textarea,
select {
	color: inherit;
	font: inherit;
}
/*
  7. Avoid text overflows
*/
p,
h1,
h2,
h3,
h4,
h5,
h6 {
	overflow-wrap: break-word;
}

html {
	height: 100%;
}

html,
body {
	overscroll-behavior-x: none;
}

body {
	display: flex;
	height: 100%;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	font-smooth: antialiased;
	text-rendering: optimizeLegibility;
}

div {
	box-sizing: border-box;
}

a {
	color: inherit;
	text-decoration: none;
}

#root {
	width: 100%;
	height: 100%;
	margin: 0;
	padding: 0;
	position: absolute;
	inset: 0;
}

.editor__layout {
	display: relative;
	position: absolute;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

.editor__tldraw {
	position: relative;
	width: 100%;
	height: 100%;
}

.editor__tldraw .tlui-layout__top__left {
	position: relative;
}

.editor__tldraw .tlui-layout__top__right {
	position: absolute;
	right: 0px;
}

.editor__tldraw .tlui-layout__top__center {
	display: none; /* Title is now in MenuPanel */
}

.editor__menu-panel-container {
	width: 100%;
	height: 40px;
	position: relative;
	pointer-events: all;
}

.editor__menu-panel-container-inner {
	position: absolute;
	inset: 0;
	cursor: move;
	background-color: var(--tla-color-canvas);
	z-index: 1;
	opacity: 0.5;
	-webkit-app-region: drag;
}

/* Editor menu panel - merged title bar */
.editor__menu-panel {
	display: flex;
	align-items: center;
	gap: 8px;
	width: fit-content;
	position: relative;
	z-index: 2;
	background-color: var(--tla-color-canvas);
	border-bottom-right-radius: 12px;
}

.editor__traffic-light-spacer {
	width: 88px; /* Space for macOS traffic lights */
	flex-shrink: 0;
}

.editor__document-title {
	display: flex;
	align-items: baseline;
	color: var(--tla-color-text-1);
	font-size: 12px;
	white-space: nowrap;
}

.editor__menu-panel .tlui-icon {
	margin-right: 4px;
	color: var(--tla-color-text-3);
	opacity: 0.5;
	cursor: move;
}

.editor__dirty-indicator {
	margin-left: 4px;
	color: var(--tla-color-canvas);
}

.editor__dirty-indicator[data-unsaved='true'] {
	color: var(--tla-color-text-1);
}

.editor__title-extension {
	color: var(--tla-color-text-3);
}

/* Make interactive elements non-draggable */
.editor__menu-panel-container button,
.editor__menu-panel-container [data-state],
.editor__menu-panel-container input,
.editor__menu-panel-container select {
	-webkit-app-region: no-drag;
}

/* Title bar */

.editor__titlebar {
	-webkit-app-region: drag;
	top: 0px;
	left: 0px;
	height: 36px;
	width: 100%;
	background-color: var(--color-panel);
	border-bottom: 1px solid var(--color-muted-1);
	z-index: 9999;
	flex-shrink: 0;
	display: flex;
	align-items: center;
	position: relative;
}

.editor__titlebar__title {
	position: absolute;
	left: 0px;
	width: 100%;
	pointer-events: none;
	display: flex;
	align-items: baseline;
	justify-content: center;
	color: var(--tla-color-text-1);
}

.editor__titlebar__title-extension {
	color: var(--tla-color-text-3);
}

.editor__titlebar__dirty-indicator {
	margin-right: 4px;
}

.editor__titlebar__window-controls {
	-webkit-app-region: no-drag;
	display: flex;
	gap: 8px;
	margin-left: 12px;
}

.editor__titlebar__window-control {
	width: 12px;
	height: 12px;
	border-radius: 50%;
	border: none;
	padding: 0;
	background-color: #d4d4d4;
	transition: all 0.15s ease;
}

/* Unfocused state - all buttons are gray */
.editor__titlebar__window-controls:not(.window-controls-focused) .editor__titlebar__window-control {
	background-color: var(--tla-color-text-3);
	opacity: 0.25;
}

/* Focused state - macOS traffic light colors */
.window-controls-focused .editor__titlebar__window-control--close {
	background-color: #ff5f57;
}

.window-controls-focused .editor__titlebar__window-control--minimize {
	background-color: #febc2e;
}

.window-controls-focused .editor__titlebar__window-control--maximize {
	background-color: #28c840;
}

/* Hover states for focused buttons */
.window-controls-focused .editor__titlebar__window-control--close:hover {
	background-color: #ff3b30;
}

.window-controls-focused .editor__titlebar__window-control--minimize:hover {
	background-color: #f5a623;
}

.window-controls-focused .editor__titlebar__window-control--maximize:hover {
	background-color: #1db954;
}

/* Active/pressed states */
.editor__titlebar__window-control:active {
	transform: scale(0.9);
}

/* ---------------------- Home ---------------------- */

.home__layout {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0px;
	left: 0px;
	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: auto 1fr auto;
	align-items: center;
	justify-content: center;
}

.home__container {
	display: flex;
	flex-shrink: 1;
	overflow: hidden;
	width: 100%;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	gap: 24px;
}

.home__container button {
	width: 100%;
}

.home__layout h1 {
	margin: 0;
	padding: 0;
	font-size: 16px;
	font-weight: 600;
	color: var(--text-color-0);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.home__layout h3 {
	margin: 0;
	padding: 0;
	font-size: 12px;
	font-weight: 500;
	padding: 4px 0px;
	color: var(--tla-color-text-3);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.home__layout .editor__titlebar {
	border-bottom: none;
}

.home__section {
	display: flex;
	border-radius: 8px;
	width: 100%;
	padding: 2px;
}

.home__logo {
	height: 24px;
}

.home__main-buttons {
	flex-direction: column;
	width: 220px;
}

.home__layout kbd {
	color: var(--tla-color-text-3);
}

.home__layout hr {
	width: calc(100% - 32px);
	height: 1px;
	background: var(--tla-color-border);
	border: none;
	margin-left: 16px;
	margin-bottom: 24px;
}

.home__button {
	width: 100%;
	background: none;
	border: none;
	text-align: left;
	height: 36px;
	padding: 0px 16px;
	display: flex;
	align-items: center;
	justify-content: space-between;
	position: relative;
	cursor: pointer;
	gap: 8px;
}

.home__button span {
	flex: 1 0;
	text-wrap: nowrap;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.home__button svg {
	flex-shrink: 0;
}

@media (hover: hover) {
	.home__button:after {
		content: '';
		position: absolute;
		inset: 2px 2px;
		border-radius: 4px;
		background-color: var(--tla-color-hover-1);
		opacity: 0;
	}

	.home__button:hover:after {
		opacity: 1;
	}
}

.home__recent {
	display: flex;
	flex-direction: column;
	width: fit-content;
	min-width: 320px;
	text-align: left;
}

@media (max-width: 500px) {
	.home__recent {
		min-width: 0px;
		width: 100%;
	}
}

.home__recent h3 {
	padding-left: 16px;
}

.home__button__file {
	justify-content: flex-start;
}

.home__file-path-container {
	position: relative;
	display: grid;
	align-items: center;
	justify-content: flex-start;
	overflow: hidden;
	flex-grow: 1;
}

.home__file-path-container::after {
	position: absolute;
	display: block;
	inset: 2px 0px;
	background-color: var(--tla-color-hover-1);
	visibility: hidden;
}

.home__file-path-container[data-paths='true'] {
	grid-template-columns: minmax(0, auto) 1fr;
}

.home__file-path-container[data-paths='true'] .home__file-path {
	opacity: 1;
}

.home__file-path-container[data-paths='false'] {
	grid-template-columns: 0fr 1fr;
}

.home__file-path-container[data-paths='false'] .home__file-path {
	opacity: 0;
}

.home__file-path {
	display: inline-block;
	color: var(--tla-color-text-3);
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.home__file-name {
	display: inline-block;
	color: var(--tla-color-text-1);
}

@media (hover: hover) {
	.home__button__file svg {
		color: var(--tla-color-text-3);
	}

	.home__button__file:hover svg {
		color: var(--tla-color-text-1);
	}
}

.home__copyright {
	padding: 8px 0px;
	font-size: 12px;
	flex-shrink: 0;
	color: var(--tla-color-text-3);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-align: center;
	background-color: var(--tla-color-panel);
	z-index: 2;
}

/* ---------------------- License ---------------------- */

.license__layout {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0px;
	left: 0px;
	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: auto 1fr auto;
}

.license__layout .editor__titlebar {
	border-bottom: none;
}

.license__content {
	overflow-y: auto;
	padding: 24px 32px;
	display: flex;
	flex-direction: column;
	gap: 24px;
	max-width: 720px;
	margin: 0 auto;
	width: 100%;
}

.license__section {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.license__section h1 {
	font-size: 20px;
	font-weight: 700;
	color: var(--tla-color-text-1);
	margin: 0;
}

.license__section h2 {
	font-size: 16px;
	font-weight: 600;
	color: var(--tla-color-text-1);
	margin: 0;
	padding-top: 8px;
	border-top: 1px solid var(--tla-color-border);
}

.license__intro {
	color: var(--tla-color-text-2);
	line-height: 1.6;
}

.license__note {
	color: var(--tla-color-text-2);
	line-height: 1.5;
}

.license__note a {
	color: var(--tla-color-primary);
	text-decoration: underline;
}

.license__note a:hover {
	color: var(--tla-color-cta);
}

.license__list {
	margin: 0;
	padding-left: 20px;
	color: var(--tla-color-text-2);
}

.license__list li {
	margin-bottom: 4px;
}

.license__text {
	font-family:
		ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
	font-size: 11px;
	line-height: 1.5;
	color: var(--tla-color-text-2);
	background-color: var(--tla-color-low);
	border: 1px solid var(--tla-color-border);
	border-radius: var(--tla-radius-2);
	padding: 16px;
	overflow-x: auto;
	white-space: pre-wrap;
	word-wrap: break-word;
	margin: 0;
}

.license__footer {
	padding: 8px 0px;
	font-size: 12px;
	flex-shrink: 0;
	color: var(--tla-color-text-3);
	text-align: center;
	background-color: var(--tla-color-panel);
}

/* ---------------------- About Page ---------------------- */

.about__layout {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0px;
	left: 0px;
	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: auto 1fr auto;
}

.about__layout .editor__titlebar {
	border-bottom: none;
}

.about__content {
	overflow-y: auto;
	display: flex;
	justify-content: center;
	flex-direction: column;
	padding-bottom: 24px;
	max-width: 720px;
	margin: 0 auto;
	width: 100%;
}

.about__hero {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 12px;
}

.about__logo {
	width: 180px;
	height: auto;
	color: var(--tla-color-text-1);
}

.about__version {
	color: var(--tla-color-text-3);
}

.about__section {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.about__description {
	margin-top: 16px;
	color: var(--tla-color-text-2);
	line-height: 1.6;
	text-align: center;
	text-wrap: balance;
}

.about__description a {
	color: var(--tla-color-primary);
	text-decoration: underline;
}

.about__description a:hover {
	color: var(--tla-color-cta);
}

.about__links {
	margin: 0;
	padding-left: 20px;
	color: var(--tla-color-text-2);
}

.about__links li {
	margin-bottom: 8px;
}

.about__links a {
	color: var(--tla-color-primary);
	text-decoration: underline;
}

.about__links a:hover {
	color: var(--tla-color-cta);
}

.about__footer {
	padding: 8px 0px;
	font-size: 12px;
	flex-shrink: 0;
	color: var(--tla-color-text-3);
	text-align: center;
	background-color: var(--tla-color-panel);
}

/* ---------------------- Error ---------------------- */

.error__layout {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0px;
	left: 0px;
	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: auto 1fr;
}

.error__layout .editor__titlebar {
	border-bottom: none;
}

.error__container {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 16px;
	padding: 24px;
	max-width: 600px;
	margin: 0 auto;
	width: 100%;
}

.error__heading {
	font-size: 20px;
	font-weight: 700;
	color: var(--tla-color-text-1);
	margin: 0;
}

.error__message {
	font-size: 14px;
	color: var(--tla-color-text-2);
	margin: 0;
	text-align: center;
}

.error__stack {
	font-family:
		ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
	font-size: 11px;
	line-height: 1.5;
	color: var(--tla-color-text-2);
	background-color: var(--tla-color-low);
	border: 1px solid var(--tla-color-border);
	border-radius: var(--tla-radius-2);
	padding: 16px;
	overflow-x: auto;
	white-space: pre-wrap;
	word-wrap: break-word;
	margin: 0;
	max-height: 200px;
	overflow-y: auto;
	width: 100%;
}

.error__actions {
	display: flex;
	gap: 12px;
	margin-top: 8px;
}

.error__button {
	background: none;
	border: 1px solid var(--tla-color-border);
	border-radius: var(--tla-radius-2);
	padding: 8px 16px;
	font-size: 14px;
	color: var(--tla-color-text-1);
	cursor: pointer;
	transition: background-color 0.15s ease;
}

.error__button:hover {
	background-color: var(--tla-color-hover-1);
}
